<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <form>
        User name:
        <input type="text" id="user"><br>
        password:
        <input type="text" onfocus="clearVal()" id="pass">
        <br>
        repeat password:
        <input type="text" onfocus="clearVal()" id="rpassword">
        <br>
        DOB:
        <input type="date" onfocus="clearVal()" id="dob">
        <br>
        <button onclick="submitBtn()">submit</button>
    </form>
    <script type="text/javascript">
        function submitBtn() {
            name = document.getElementById('user').value;
            pattern1 = '^[a-zA-z0-9_]{8,30}$';

            let r = new RegExp(pattern1);

            if (!r.test(name)) {
                alert("uaername must be minimum of 8 length")
            }
            password = document.getElementById('pass').value;
            if (password.value.length() > 12 && password.value.length() < 8) {
                alert('password length must be 8-12 characters')
            }
            else {
                pattern2 = '^[!@#$%^&*]{1,}[a-zA-z0-9_]{2,}$';

                let r2 = new RegExp(pattern2);

                if (!r2.test(password)) {
                    alert('password must contain at least 1 digit and 1 special character')
                }
            }
            rpassword = document.getElementById('rpassword').value;
            if (password != rpassword) {
                alert("plese enter same password")
            }
            calcage()
        }
        function calcage() {
            let DOB = document.getElementById('dob').value
            DOB = new Date(DOB)
            let today = new Date();
            let age = today.getFullYear() - DOB.getFullYear()
            let monthDiff = today.getMonth() - DOB.getMonth()
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < DOB.getDate())) {
                age--;
            }
            console.log(age)
            return age;
        }
    </script>
</body>

</html>